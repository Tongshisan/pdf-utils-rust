# ğŸ“¦ å‘å¸ƒæŒ‡å—

## ğŸ¯ æ›´æ–°çš„ publish.sh åŠŸèƒ½

### æ–°å¢åŠŸèƒ½

1. **âœ… npm ç™»å½•æ£€æŸ¥**

   - è‡ªåŠ¨æ£€æŸ¥æ˜¯å¦å·²ç™»å½• npm
   - æ˜¾ç¤ºå½“å‰ç™»å½•ç”¨æˆ·
   - æœªç™»å½•æ—¶æç¤ºå¹¶é€€å‡º

2. **ğŸ”§ è‡ªåŠ¨ä¿®å¤åŒ…å**

   - æ£€æŸ¥ç”Ÿæˆçš„åŒ…åæ˜¯å¦æ­£ç¡®
   - å¦‚æœåŒ…åä¸æ˜¯ `@tongshisan/pdf-utils-rust`ï¼Œè‡ªåŠ¨ä¿®å¤
   - ç¡®ä¿æ¯æ¬¡å‘å¸ƒä½¿ç”¨æ­£ç¡®çš„åŒ…å

3. **ğŸ” ç‰ˆæœ¬å†²çªæ£€æŸ¥**

   - å‘å¸ƒå‰æ£€æŸ¥ç‰ˆæœ¬æ˜¯å¦å·²å­˜åœ¨
   - é¿å…é‡å¤å‘å¸ƒåŒä¸€ç‰ˆæœ¬
   - æç¤ºæ›´æ–°ç‰ˆæœ¬å·

4. **ğŸ“Š è¯¦ç»†ä¿¡æ¯æ˜¾ç¤º**

   - æ˜¾ç¤ºåŒ…åã€ç‰ˆæœ¬ã€æè¿°
   - æ˜¾ç¤º WASM æ–‡ä»¶å¤§å°
   - æ›´æ¸…æ™°çš„è¾“å‡ºæ ¼å¼

5. **ğŸ’¡ å‘å¸ƒåæç¤º**
   - æä¾› Git æäº¤å’Œæ ‡ç­¾å‘½ä»¤
   - å®Œæ•´çš„åç»­æ­¥éª¤æŒ‡å¯¼

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨

```bash
./publish.sh
```

è„šæœ¬ä¼šï¼š

1. æ£€æŸ¥ npm ç™»å½•çŠ¶æ€
2. æ¸…ç†å¹¶é‡æ–°æ„å»º
3. éªŒè¯å’Œä¿®å¤åŒ…é…ç½®
4. æ˜¾ç¤ºåŒ…ä¿¡æ¯
5. æ£€æŸ¥ç‰ˆæœ¬å†²çª
6. è¯¢é—®æ˜¯å¦å‘å¸ƒ
7. å‘å¸ƒåˆ° npm
8. æä¾›åç»­æ­¥éª¤å»ºè®®

### é¦–æ¬¡ä½¿ç”¨

å¦‚æœè¿˜æ²¡ç™»å½• npmï¼š

```bash
npm login
# ç„¶åè¿è¡Œ
./publish.sh
```

## ğŸ“ å®Œæ•´å‘å¸ƒæµç¨‹

### 1. ä¿®æ”¹ä»£ç å

```bash
# 1. æµ‹è¯•ä»£ç 
cargo test

# 2. æ›´æ–°ç‰ˆæœ¬å·ï¼ˆåœ¨ Cargo.tomlï¼‰
# version = "0.1.1" -> "0.1.2"

# 3. è¿è¡Œå‘å¸ƒè„šæœ¬
./publish.sh
```

### 2. è„šæœ¬è¾“å‡ºç¤ºä¾‹

```
ğŸš€ å‡†å¤‡å‘å¸ƒ @tongshisan/pdf-utils-rust

ğŸ”‘ æ£€æŸ¥ npm ç™»å½•çŠ¶æ€...
âœ… å·²ç™»å½•ä¸º: tongshisan

ğŸ§¹ æ¸…ç†æ—§æ„å»º...
ğŸ”¨ æ„å»º WASM åŒ…...

ğŸ” éªŒè¯åŒ…é…ç½®...
âœ… åŒ…åæ­£ç¡®

ğŸ“¦ åŒ…ä¿¡æ¯ï¼š
  "name": "@tongshisan/pdf-utils-rust",
  "version": "0.1.2",
  "description": "PDF and image processing utilities..."

ğŸ“Š æ–‡ä»¶å¤§å°ï¼š
  WASM: 1.0M (pdf_utils_rust_bg.wasm)

ğŸ“Œ å½“å‰ç‰ˆæœ¬: 0.1.2
ğŸ” æ£€æŸ¥ç‰ˆæœ¬æ˜¯å¦å·²å­˜åœ¨...

æ˜¯å¦å‘å¸ƒåˆ° NPM? (y/n)
```

### 3. å‘å¸ƒæˆåŠŸå

æŒ‰ç…§è„šæœ¬æç¤ºçš„å‘½ä»¤ï¼š

```bash
# æäº¤ä»£ç 
git add .
git commit -m 'chore: release v0.1.2'

# æ‰“æ ‡ç­¾
git tag v0.1.2

# æ¨é€
git push origin main --tags
```

## âš ï¸ å¸¸è§åœºæ™¯å¤„ç†

### åœºæ™¯ 1: å¿˜è®°æ›´æ–°ç‰ˆæœ¬å·

```
âš ï¸  ç‰ˆæœ¬ 0.1.1 å·²ç»å‘å¸ƒè¿‡äº†ï¼

æ˜¯å¦è¦æ›´æ–°ç‰ˆæœ¬å·? (y/n) y

è¯·åœ¨ Cargo.toml ä¸­æ›´æ–°ç‰ˆæœ¬å·ï¼Œç„¶åé‡æ–°è¿è¡Œæ­¤è„šæœ¬
```

**è§£å†³**ï¼š

1. ç¼–è¾‘ `Cargo.toml`
2. æ›´æ–° `version = "0.1.2"`
3. é‡æ–°è¿è¡Œ `./publish.sh`

### åœºæ™¯ 2: åŒ…åè‡ªåŠ¨ä¿®å¤

```
âš ï¸  åŒ…åä¸æ­£ç¡®: pdf-utils-rust
ğŸ”§ æ­£åœ¨ä¿®å¤åŒ…å...
âœ… åŒ…åå·²ä¿®å¤ä¸º: @tongshisan/pdf-utils-rust
```

è¿™æ˜¯æ­£å¸¸çš„ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ä¿®å¤ã€‚

### åœºæ™¯ 3: æœªç™»å½• npm

```
âŒ æœªç™»å½• npmï¼Œè¯·å…ˆè¿è¡Œ: npm login
```

**è§£å†³**ï¼š

```bash
npm login
# è¾“å…¥è´¦å·å¯†ç 
./publish.sh
```

## ğŸ”§ é…ç½®æ–‡ä»¶è¯´æ˜

### wasm-pack.toml

```toml
[package]
name = "@tongshisan/pdf-utils-rust"
```

è¿™ä¸ªæ–‡ä»¶å‘Šè¯‰ wasm-pack ä½¿ç”¨æ­£ç¡®çš„åŒ…åã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œwasm-pack ä¼šä½¿ç”¨ Cargo.toml ä¸­çš„åŒ…åï¼ˆæ²¡æœ‰ scopeï¼‰ã€‚

### Cargo.toml

```toml
[package]
name = "pdf-utils-rust"
version = "0.1.1"  # ğŸ‘ˆ æ¯æ¬¡å‘å¸ƒå‰æ›´æ–°è¿™é‡Œ
```

## ğŸ“Š ç‰ˆæœ¬å·è§„èŒƒ

éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/)ï¼š

- **0.1.0 â†’ 0.1.1**: Bug ä¿®å¤ï¼ˆPATCHï¼‰
- **0.1.0 â†’ 0.2.0**: æ–°åŠŸèƒ½ï¼ˆMINORï¼‰
- **0.1.0 â†’ 1.0.0**: é‡å¤§æ›´æ”¹ï¼ˆMAJORï¼‰

### ç¤ºä¾‹

| æ›´æ”¹ç±»å‹   | ç‰ˆæœ¬æ›´æ–°      | è¯´æ˜     |
| ---------- | ------------- | -------- |
| ä¿®å¤ bug   | 0.1.1 â†’ 0.1.2 | è¡¥ä¸ç‰ˆæœ¬ |
| æ·»åŠ æ–°åŠŸèƒ½ | 0.1.2 â†’ 0.2.0 | æ¬¡ç‰ˆæœ¬   |
| ç ´åæ€§æ›´æ”¹ | 0.2.0 â†’ 1.0.0 | ä¸»ç‰ˆæœ¬   |

## ğŸ¯ æœ€ä½³å®è·µ

### å‘å¸ƒå‰æ£€æŸ¥æ¸…å•

- [ ] ä»£ç å·²æµ‹è¯•é€šè¿‡
- [ ] æ›´æ–°äº† CHANGELOG.mdï¼ˆå¦‚æœæœ‰ï¼‰
- [ ] æ›´æ–°äº†ç‰ˆæœ¬å·
- [ ] æ›´æ–°äº†æ–‡æ¡£ï¼ˆå¦‚æœéœ€è¦ï¼‰
- [ ] æœ¬åœ°æµ‹è¯•äº†æ„å»ºç»“æœ

### å‘å¸ƒå

- [ ] éªŒè¯åŒ…å¯ä»¥æ­£å¸¸å®‰è£…
- [ ] åˆ›å»º Git æ ‡ç­¾
- [ ] åœ¨ GitHub åˆ›å»º Release
- [ ] æ›´æ–°æ–‡æ¡£ç½‘ç«™ï¼ˆå¦‚æœæœ‰ï¼‰
- [ ] é€šçŸ¥ç”¨æˆ·æ›´æ–°

## ğŸ†˜ æ•…éšœæ’é™¤

### é—®é¢˜ï¼šæ„å»ºå¤±è´¥

```bash
# æ£€æŸ¥ Rust ç¯å¢ƒ
rustc --version
cargo --version
wasm-pack --version

# é‡æ–°å®‰è£… wasm-pack
curl https://rustwasm.github.io/wasm-pack/installer/init.sh -sSf | sh
```

### é—®é¢˜ï¼šå‘å¸ƒæƒé™é”™è¯¯

```bash
# æ£€æŸ¥ç™»å½•ç”¨æˆ·
npm whoami

# æ£€æŸ¥åŒ…æƒé™
npm access ls-packages

# é‡æ–°ç™»å½•
npm logout
npm login
```

### é—®é¢˜ï¼šç½‘ç»œé—®é¢˜

```bash
# ä½¿ç”¨ä»£ç†
npm config set proxy http://proxy.company.com:8080
npm config set https-proxy http://proxy.company.com:8080

# æˆ–ä½¿ç”¨æ·˜å®é•œåƒï¼ˆä»…æŸ¥çœ‹ï¼Œä¸å½±å“å‘å¸ƒï¼‰
npm config set registry https://registry.npmmirror.com
```

## ğŸ“š ç›¸å…³å‘½ä»¤

```bash
# æŸ¥çœ‹å·²å‘å¸ƒçš„ç‰ˆæœ¬
npm view @tongshisan/pdf-utils-rust versions

# æŸ¥çœ‹åŒ…è¯¦æƒ…
npm view @tongshisan/pdf-utils-rust

# æ ‡è®°ç‰ˆæœ¬ä¸ºåºŸå¼ƒ
npm deprecate @tongshisan/pdf-utils-rust@0.1.0 "è¯·å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬"

# æ’¤é”€å‘å¸ƒï¼ˆ24å°æ—¶å†…ï¼‰
npm unpublish @tongshisan/pdf-utils-rust@0.1.1

# æµ‹è¯•å®‰è£…
npm install @tongshisan/pdf-utils-rust@latest
```

---

**ç¥å‘å¸ƒé¡ºåˆ©ï¼** ğŸš€
